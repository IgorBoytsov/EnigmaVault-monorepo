<Page x:Class="EnigmaVault.WPF.Client.Views.Pages.UserSecretsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:EnigmaVault.WPF.Client.Views.Pages"
      xmlns:pages="clr-namespace:EnigmaVault.WPF.Client.ViewModels.Pages"
      d:DataContext="{d:DesignInstance Type=pages:UserSecretsPageVM}"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Background="White"
      Title="UserSecretsPage">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <DataGrid Grid.Column="0"
                  ItemsSource="{Binding SecretDatas}"
                  SelectedItem="{Binding SelectedSecretData}">
            
        </DataGrid>

        <DockPanel Grid.Column="1">

            <TextBlock Text="Название"
                       Foreground="Black"
                       DockPanel.Dock="Top"/>
            <TextBox Text="{Binding NameSecret}"
                     DockPanel.Dock="Top"/>

            <TextBlock Text="Url"
                       Foreground="Black"
                       DockPanel.Dock="Top"/>
            <TextBox Text="{Binding UrlSecret}" DockPanel.Dock="Top"/>
            
            <Button Content="Обновить"
                    Command="{Binding UpdateMetadataCommand}"
                    CommandParameter="{Binding SelectedSecretData}"
                    DockPanel.Dock="Top"
                    HorizontalAlignment="Right"/>
            
            
            <TextBlock Text="Секретные данные - будут зашифрованы"
                       Foreground="Black"
                       DockPanel.Dock="Top"
                       Margin="0,0,0,10"/>
            
            <TextBlock Text="Имя пользователя \ логин"
                       Foreground="Black"
                       DockPanel.Dock="Top"/>
            <TextBox Text="{Binding UsernameSecret, UpdateSourceTrigger=PropertyChanged}" 
                     DockPanel.Dock="Top"/>
            
            <TextBlock Text="Пароль"
                       Foreground="Black"
                       DockPanel.Dock="Top"/>
            <TextBox Text="{Binding PasswordSecret, UpdateSourceTrigger=PropertyChanged}"
                     DockPanel.Dock="Top"/> 
            
            <TextBlock Text="Почта"
                       Foreground="Black"
                       DockPanel.Dock="Top"/>
            <TextBox Text="{Binding EmailSecret, UpdateSourceTrigger=PropertyChanged}"
                     DockPanel.Dock="Top"/>    
            
            <TextBlock Text="Секретное слово\фраза"
                       Foreground="Black"
                       DockPanel.Dock="Top"/>
            <TextBox Text="{Binding SecretWorldSecret, UpdateSourceTrigger=PropertyChanged}"
                     DockPanel.Dock="Top"/>   
            
            <TextBlock Text="Ключи востановление"
                       Foreground="Black"
                       DockPanel.Dock="Top"/>
            <TextBox Text="{Binding RecoveryKeysSecret, UpdateSourceTrigger=PropertyChanged}"
                     DockPanel.Dock="Top"/>

            <Button Content="Обновить"
                    Command="{Binding UpdateEncryptedDataCommand}"
                    CommandParameter="{Binding SelectedSecretData}"
                    DockPanel.Dock="Top"
                    HorizontalAlignment="Right"/>

            <TextBlock Text="Заметки"
                       Foreground="Black"
                       DockPanel.Dock="Top"/>
            <TextBox Text="{Binding NotesSecret}" DockPanel.Dock="Top"/>

            <Button Content="Обновить"
                    Command="{Binding UpdateNoteCommand}"
                    CommandParameter="{Binding SelectedSecretData}"
                    DockPanel.Dock="Top"
                    HorizontalAlignment="Right"/>

            <CheckBox Content="Избранное"
                      IsChecked="{Binding IsFavorite}"
                      Command="{Binding UpdateFavoriteCommand}"
                      CommandParameter="{Binding SelectedSecretData}"/>

            <TextBlock Text="{Binding SelectedSecretData.DateUpdate, StringFormat=Дата обновление - {0}}"/>

            <WrapPanel DockPanel.Dock="Bottom"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Bottom">

                <Button Content="Сохранить"
                        Command="{Binding CreateSecretCommand}"/>

                <Button Content="Обновить"
                        Command="{Binding UpdateSecretCommand}"
                        CommandParameter="{Binding SelectedSecretData}"/>

                <Button Content="Удалить"
                        Command="{Binding DeleteSecretCommand}"
                        CommandParameter="{Binding SelectedSecretData}"/>

            </WrapPanel>
            
        </DockPanel>
        
    </Grid>
</Page>
